/**
           * ui-leaflet-layers
           *
           * @version: 0.1.1
           * @author: Michael Salgado <elesdoar@gmail.com>
           * @date: Tue Sep 27 2016 11:41:57 GMT-0500 (COT)
           * @license: MIT
           */
(function (window, angular){
  'use strict';
  {"version":3,"sources":["leafletHelpers.es6","leafletLayerHelpers.es6","logger.es6"],"names":["angular","module","config","$provide","decorator","$delegate","leafletLayersLogger","$log","basicFunction","isLoaded","isDefined","layerType","is","layer","plugins","BingLayerPlugin","L","BingLayer","ChinaLayerPlugin","tileLayer","chinaProvider","GoogleLayerPlugin","Google","HeatLayerPlugin","heatLayer","LeafletProviderPlugin","TileLayer","Provider","MapboxGL","mapboxGL","MarkerClusterPlugin","MarkerClusterGroup","UTFGridPlugin","UtfGrid","WebGLHeatMapLayerPlugin","WebGLHeatMap","WFSLayerPlugin","GeoJSON","WFS","YandexLayerPlugin","Yandex","esri","extend","AGSBaseLayerPlugin","basemapLayer","AGSClusteredLayerPlugin","clusteredFeatureLayer","AGSDynamicMapLayerPlugin","dynamicMapLayer","AGSFeatureLayerPlugin","featureLayer","AGSImageMapLayerPlugin","imageMapLayer","AGSHeatmapLayerPlugin","heatmapFeatureLayer","AGSTiledMapLayerPlugin","tiledMapLayer","window","lvector","AGSLayerPlugin","AGS","info","$rootScope","$q","leafletHelpers","isArray","isObject","errorHeader","utfGridCreateLayer","error","utfgrid","params","url","pluginOptions","on","e","$broadcast","layerTypes","ags","mustHaveUrl","createLayer","options","copy","onAdd","map","setMap","onRemove","agsBase","mustHaveLayer","agsClustered","warn","agsDynamic","agsFeature","load","loadedDefer","resolve","defer","off","agsHeatmap","agsImage","agsTiled","bing","key","china","type","google","heat","mustHaveData","data","setLatLngs","setOptions","here","provider","mapbox","mustHaveKey","version","apiKey","markercluster","utfGrid","webGLHeatmap","setData","wfs","crs","eval","yandex","service","nemSimpleLogger","spawn"],"mappings":"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","file":"ui-leaflet-layers.js","sourcesContent":["angular.module('ui-leaflet')\n  .config($provide =>\n    $provide.decorator('leafletHelpers', function($delegate, leafletLayersLogger) {\n      const $log = leafletLayersLogger;\n\n      const basicFunction = layerType =>\n        ({\n          isLoaded() {\n            return angular.isDefined(layerType);\n          },\n          is(layer) {\n            if (this.isLoaded()) {\n              return layer instanceof layerType;\n            }\n            return false;\n          }\n        });\n\n      const plugins = {\n        // Please keep keys order by alphabetical sort.\n        BingLayerPlugin: basicFunction(L.BingLayer),\n        ChinaLayerPlugin: basicFunction(L.tileLayer.chinaProvider),\n        GoogleLayerPlugin: basicFunction(L.Google),\n        HeatLayerPlugin: basicFunction(L.heatLayer),\n        LeafletProviderPlugin: basicFunction(L.TileLayer.Provider),\n        MapboxGL: basicFunction(L.mapboxGL),\n        MarkerClusterPlugin: basicFunction(L.MarkerClusterGroup),\n        UTFGridPlugin: basicFunction(L.UtfGrid),\n        WebGLHeatMapLayerPlugin: basicFunction(L.TileLayer.WebGLHeatMap),\n        WFSLayerPlugin: basicFunction(L.GeoJSON.WFS),\n        YandexLayerPlugin: basicFunction(L.Yandex)\n      };\n\n      if(angular.isDefined(L.esri)) {\n        angular.extend(plugins, {\n          AGSBaseLayerPlugin: basicFunction(L.esri.basemapLayer),\n          AGSClusteredLayerPlugin: basicFunction(L.esri.clusteredFeatureLayer),\n          AGSDynamicMapLayerPlugin: basicFunction(L.esri.dynamicMapLayer),\n          AGSFeatureLayerPlugin: basicFunction(L.esri.featureLayer),\n          AGSImageMapLayerPlugin: basicFunction(L.esri.imageMapLayer),\n          AGSHeatmapLayerPlugin: basicFunction(L.esri.heatmapFeatureLayer),\n          AGSTiledMapLayerPlugin: basicFunction(L.esri.tiledMapLayer)\n        });\n      } else {\n        angular.extend(plugins, {\n          AGSBaseLayerPlugin: basicFunction(),\n          AGSClusteredLayerPlugin: basicFunction(),\n          AGSDynamicMapLayerPlugin: basicFunction(),\n          AGSFeatureLayerPlugin: basicFunction(),\n          AGSImageMapLayerPlugin: basicFunction(),\n          AGSHeatmapLayerPlugin: basicFunction(),\n          AGSTiledMapLayerPlugin: basicFunction()\n        });\n      }\n\n      if(angular.isDefined(window.lvector)) {\n        angular.extend(plugins, {\n          AGSLayerPlugin: basicFunction(window.lvector.AGS)\n        });\n      } else {\n        angular.extend(plugins, {\n          AGSLayerPlugin: basicFunction()\n        });\n      }\n\n      angular.extend($delegate, plugins);\n\n      $log.info('[ui-leaflet-layers] - Layers plugin is loaded');\n\n      return $delegate;\n    })\n  );\n","angular.module('ui-leaflet')\n  .config($provide =>\n    $provide.decorator('leafletLayerHelpers', function($delegate, $rootScope, $q, leafletHelpers, leafletLayersLogger) {\n      let $log = leafletLayersLogger;\n      let { isArray } = leafletHelpers;\n      let { isObject } = leafletHelpers;\n      let { isDefined } = leafletHelpers;\n      let { errorHeader } = leafletHelpers;\n      let utfGridCreateLayer = params => {\n        if (!leafletHelpers.UTFGridPlugin.isLoaded()) {\n          $log.error(errorHeader + ' The UTFGrid plugin is not loaded.');\n          return;\n        }\n\n        let utfgrid = new L.UtfGrid(params.url, params.pluginOptions);\n\n        utfgrid.on('mouseover', function(e) {\n          $rootScope.$broadcast('leafletDirectiveMap.utfgridMouseover', e);\n        });\n\n        utfgrid.on('mouseout', function(e) {\n          $rootScope.$broadcast('leafletDirectiveMap.utfgridMouseout', e);\n        });\n\n        utfgrid.on('click', function(e) {\n          $rootScope.$broadcast('leafletDirectiveMap.utfgridClick', e);\n        });\n\n        utfgrid.on('mousemove', function(e) {\n          $rootScope.$broadcast('leafletDirectiveMap.utfgridMousemove', e);\n        });\n\n        return utfgrid;\n      };\n\n      angular.extend($delegate.layerTypes, {\n        ags: {\n          mustHaveUrl: true,\n          createLayer: function(params) {\n            if (!leafletHelpers.AGSLayerPlugin.isLoaded()) {\n              return;\n            }\n\n            var options = angular.copy(params.options);\n            angular.extend(options, {\n              url: params.url\n            });\n            var layer = new lvector.AGS(options);\n            layer.onAdd = function(map) {\n              this.setMap(map);\n            };\n            layer.onRemove = function() {\n              this.setMap(null);\n            };\n            return layer;\n          }\n        },\n        agsBase: {\n          mustHaveLayer : true,\n          createLayer: function (params) {\n            if (!leafletHelpers.AGSBaseLayerPlugin.isLoaded()) {\n              return;\n            }\n            return L.esri.basemapLayer(params.layer, params.options);\n          }\n        },\n        agsClustered: {\n          mustHaveUrl: true,\n          createLayer: function(params) {\n            if (!leafletHelpers.AGSClusteredLayerPlugin.isLoaded()) {\n              $log.warn(errorHeader + ' The esri clustered layer plugin is not loaded.');\n              return;\n            }\n\n            if(!leafletHelpers.MarkerClusterPlugin.isLoaded()) {\n              $log.warn(errorHeader + ' The markercluster plugin is not loaded.');\n              return;\n            }\n            return L.esri.clusteredFeatureLayer(params.url, params.options);\n          }\n        },\n        agsDynamic: {\n          mustHaveUrl: true,\n          createLayer: function(params) {\n            if (!leafletHelpers.AGSDynamicMapLayerPlugin.isLoaded()) {\n              $log.warn(errorHeader + ' The esri plugin is not loaded.');\n              return;\n            }\n\n            params.options.url = params.url;\n\n            return L.esri.dynamicMapLayer(params.options);\n          }\n        },\n        agsFeature: {\n          mustHaveUrl: true,\n          createLayer: function(params) {\n            if (!leafletHelpers.AGSFeatureLayerPlugin.isLoaded()) {\n              $log.warn(errorHeader + ' The esri plugin is not loaded.');\n              return;\n            }\n\n            params.options.url = params.url;\n\n            var layer = L.esri.featureLayer(params.options);\n            var load = function() {\n              if(isDefined(params.options.loadedDefer)) {\n                params.options.loadedDefer.resolve();\n              }\n            };\n            layer.on('loading', function() {\n              params.options.loadedDefer = $q.defer();\n              layer.off('load', load);\n              layer.on('load', load);\n            });\n\n            return layer;\n          }\n        },\n        agsHeatmap: {\n          mustHaveUrl: true,\n          createLayer: function(params) {\n            if (!leafletHelpers.AGSHeatmapLayerPlugin.isLoaded()) {\n              $log.warn(errorHeader + ' The esri heatmap layer plugin is not loaded.');\n              return;\n            }\n\n            if(!leafletHelpers.HeatLayerPlugin.isLoaded()) {\n              $log.warn(errorHeader + ' The heatlayer plugin is not loaded.');\n              return;\n            }\n            return L.esri.heatmapFeatureLayer(params.url, params.options);\n          }\n        },\n        agsImage: {\n          mustHaveUrl: true,\n          createLayer: function(params) {\n            if (!leafletHelpers.AGSImageMapLayerPlugin.isLoaded()) {\n              $log.warn(errorHeader + ' The esri plugin is not loaded.');\n              return;\n            }\n            params.options.url = params.url;\n\n            return L.esri.imageMapLayer(params.options);\n          }\n        },\n        agsTiled: {\n          mustHaveUrl: true,\n          createLayer: function(params) {\n            if (!leafletHelpers.AGSTiledMapLayerPlugin.isLoaded()) {\n              $log.warn(errorHeader + ' The esri plugin is not loaded.');\n              return;\n            }\n\n            params.options.url = params.url;\n\n            return L.esri.tiledMapLayer(params.options);\n          }\n        },\n        bing: {\n          mustHaveUrl: false,\n          createLayer(params) {\n            if (!leafletHelpers.BingLayerPlugin.isLoaded()) {\n              $log.error(errorHeader + ' The Bing plugin is not loaded.');\n              return;\n            }\n            return new L.BingLayer(params.key, params.options);\n          }\n        },\n\n        china: {\n          mustHaveUrl:false,\n          createLayer(params) {\n            let type = params.type || '';\n            if (!leafletHelpers.ChinaLayerPlugin.isLoaded()) {\n              $log.error(errorHeader + ' The ChinaLayer plugin is not loaded.');\n              return;\n            }\n            return L.tileLayer.chinaProvider(type, params.options);\n          }\n        },\n\n        google: {\n          mustHaveUrl: false,\n          createLayer(params) {\n            let type = params.type || 'SATELLITE';\n            if (!leafletHelpers.GoogleLayerPlugin.isLoaded()) {\n              $log.error(errorHeader + ' The GoogleLayer plugin is not loaded.');\n              return;\n            }\n            return new L.Google(type, params.options);\n          }\n        },\n\n        heat: {\n          mustHaveUrl: false,\n          mustHaveData: true,\n          createLayer(params) {\n            if (!leafletHelpers.HeatLayerPlugin.isLoaded()) {\n              $log.error(errorHeader + ' The HeatMapLayer plugin is not loaded.');\n              return;\n            }\n            let layer = new L.heatLayer();\n            if (isArray(params.data)) {\n              layer.setLatLngs(params.data);\n            }\n            if (isObject(params.options)) {\n              layer.setOptions(params.options);\n            }\n            return layer;\n          }\n        },\n\n        here: {\n          mustHaveUrl: false,\n          createLayer: function(params) {\n            var provider = params.provider || 'HERE.terrainDay';\n            if (!leafletHelpers.LeafletProviderPlugin.isLoaded()) {\n              return;\n            }\n            return new L.TileLayer.Provider(provider, params.options);\n          }\n        },\n\n        mapbox: {\n          mustHaveKey: true,\n          createLayer(params) {\n            let version = 3;\n            if(isDefined(params.options.version) && params.options.version === 4) {\n              version = params.options.version;\n            }\n            let url = version === 3?\n              '//{s}.tiles.mapbox.com/v3/' + params.key + '/{z}/{x}/{y}.png':\n              '//api.tiles.mapbox.com/v4/' + params.key + '/{z}/{x}/{y}.png?access_token=' + params.apiKey;\n            return L.tileLayer(url, params.options);\n          }\n        },\n\n        mapboxGL: {\n          createLayer(params) {\n            if (!leafletHelpers.MapboxGL.isLoaded()) {\n              $log.error(errorHeader + ' The MapboxGL plugin is not loaded.');\n              return;\n            }\n            return new L.mapboxGL(params.options);\n          }\n        },\n\n        markercluster: {\n          mustHaveUrl: false,\n          createLayer: function(params) {\n            if (!leafletHelpers.MarkerClusterPlugin.isLoaded()) {\n              $log.warn(errorHeader + ' The markercluster plugin is not loaded.');\n              return;\n            }\n            return new L.MarkerClusterGroup(params.options);\n          }\n        },\n\n        utfGrid: {\n          mustHaveUrl: true,\n          createLayer: utfGridCreateLayer\n        },\n\n        webGLHeatmap: {\n          mustHaveUrl: false,\n          mustHaveData: true,\n          createLayer(params) {\n            if (!leafletHelpers.WebGLHeatMapLayerPlugin.isLoaded()) {\n              $log.error(errorHeader + ' The WebGLHeatMapLayer plugin is not loaded.');\n              return;\n            }\n            let layer = new L.TileLayer.WebGLHeatMap(params.options);\n            if (isDefined(params.data)) {\n              layer.setData(params.data);\n            }\n            return layer;\n          }\n        },\n\n        wfs: {\n          mustHaveUrl: true,\n          mustHaveLayer: true,\n          createLayer(params) {\n            if (!leafletHelpers.WFSLayerPlugin.isLoaded()) {\n              $log.error(errorHeader + ' The WFSLayer plugin is not loaded.');\n              return;\n            }\n            let options = angular.copy(params.options);\n            if (options.crs && 'string' === typeof options.crs) {\n              options.crs = eval(options.crs);\n            }\n            return new L.GeoJSON.WFS(params.url, params.layer, options);\n          }\n        },\n\n        yandex: {\n          mustHaveUrl: false,\n          createLayer(params) {\n            let type = params.type || 'map';\n            if (!leafletHelpers.YandexLayerPlugin.isLoaded()) {\n              $log.error(errorHeader + ' The YandexLayer plugin is not loaded.');\n              return;\n            }\n            return new L.Yandex(type, params.options);\n          }\n        }\n      });\n\n      return $delegate;\n    })\n  );\n","angular.module('ui-leaflet')\n  .service('leafletLayersLogger', nemSimpleLogger => nemSimpleLogger.spawn());\n"],"sourceRoot":"/source/"}
})(window, angular);